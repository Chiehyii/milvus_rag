---
config:
  layout: dagre
---
flowchart TB
    A["使用者輸入問題"] --> F("意圖分類")
    F --> G{"是否和獎助學金相關?"}
    G -- 是 --> H["1️⃣ 產生問題向量 Embedding"]
    H --metadata filter--> J["3️⃣ 在向量資料庫中檢索"]
    J --> K{"是否有相關文件?"}
    K -- 是 --> L["4️⃣ 組合 Prompt（問題 + 文件內容）"]
    L --> M["5️⃣ 呼叫 LLM 生成答案"]
    M --> P["返回最終答案給使用者"]
    K -- 否 --> O["設定「無相關資訊」的回答"]
    O --> P
    G -- 否 --> Q["直接呼叫 LLM 回答"]
    Q --> P
